# 📋 GeoLens - 引用检测MVP

## 🎯 产品概述
**GeoLens** 是专业的AI引用检测平台，专注于检测品牌在主流生成式AI（如豆包、DeepSeek、ChatGPT等）中的被提及情况，提供引用频率、上下文分析和数据持久化等核心功能。

## 🚀 MVP 目标
> 通过精准的引用检测技术，帮助品牌了解其在AI回答中的真实表现，提供数据驱动的AI可见性洞察。

---

## 📊 当前项目状态 (v0.8.0-streamlit-ready)

### ✅ **MVP核心功能 - 完成并验证**
- **引用检测引擎**: 统一服务架构，多模型并行
- **真实AI集成**: 豆包+DeepSeek API完整集成
- **智能品牌检测**: 准确率100%，支持隐式提及
- **数据持久化**: SQLite本地存储，Repository模式
- **端到端验证**: 真实API测试，82.4%通过率
- **系统架构**: 重构完成，生产就绪
- **前端技术决策**: ✅ Streamlit MVP方案确认

### 🎯 **关键指标**
| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 端到端测试 | ≥80% | 82.4% | ✅ |
| AI集成 | 2个模型 | 豆包+DeepSeek | ✅ |
| 品牌检测 | ≥95% | 100% | ✅ |
| 数据持久化 | 完整 | SQLite | ✅ |
| 前端技术选型 | 确定 | Streamlit | ✅ |

---

## 🚀 当前开发计划 (更新于 2024-12-19)

### **🔥 Sprint 6: Streamlit MVP前端开发 (当前Sprint)**

#### **Phase 1: 核心功能开发 (Week 1)**
- [ ] **项目架构搭建**
  - Streamlit多页面应用结构
  - 组件和服务模块划分
  - 配置和工具函数

- [ ] **用户认证集成**
  - 与FastAPI JWT认证集成
  - Session State token管理
  - 登录/注册界面

- [ ] **引用检测页面（核心）**
  - Prompt输入和模板选择
  - 品牌和模型选择界面
  - 实时检测和进度显示
  - 结果展示和可视化

#### **Phase 2: 数据展示优化 (Week 2)**
- [ ] **检测历史管理**
  - 历史记录表格和筛选
  - 详情查看和导出功能
  - 分页和搜索功能

- [ ] **项目管理页面**
  - 项目CRUD操作界面
  - 项目概览和统计
  - 品牌列表管理

- [ ] **基础数据可视化**
  - 品牌提及率对比图
  - 模型性能对比
  - 简单趋势分析

#### **Phase 3: 体验优化 (Week 3)**
- [ ] **高级分析功能**
  - 置信度雷达图
  - 竞品对比分析
  - 时间趋势分析

- [ ] **Prompt模板管理**
  - 模板库界面
  - 变量提取和表单生成
  - 模板应用和编辑

- [ ] **用户体验优化**
  - 响应式布局优化
  - 错误处理和提示
  - 性能优化和缓存

### **Sprint 7: 云化部署和生产优化**
- [ ] **Supabase云数据库迁移**
  - SQLite → PostgreSQL数据迁移
  - 生产环境数据库配置
  - 云端数据安全和备份

- [ ] **生产环境部署**
  - Streamlit Cloud部署
  - 域名和SSL配置
  - 监控和日志系统

- [ ] **功能增强**
  - 批量检测功能
  - 高级导出功能
  - 用户反馈收集

---

## 🎯 **MVP验收标准**

### ✅ **后端MVP验收完成**
- [x] 端到端测试验证 (82.4%通过率)
- [x] 真实AI API集成 (豆包+DeepSeek)
- [x] 品牌检测算法验证 (100%准确率)
- [x] 数据持久化完整实现
- [x] 系统架构重构完成
- [x] 生产就绪状态验证
- [x] 前端技术方案确定 (Streamlit)

### 🚀 **前端MVP验收目标 (Sprint 6)**
- [ ] Streamlit应用架构搭建
- [ ] 用户认证集成完成
- [ ] 核心引用检测界面开发
- [ ] 基础数据可视化实现
- [ ] 检测历史管理功能
- [ ] 项目管理界面
- [ ] MVP功能完整性验证

### 🎯 **生产部署目标 (Sprint 7)**
- [ ] Supabase云数据库迁移
- [ ] Streamlit Cloud部署
- [ ] 生产环境监控
- [ ] 用户反馈收集机制

---

## 📈 **项目里程碑**

### ✅ **Phase 1: 算法验证** (已完成)
- 引用检测算法开发和验证
- 多模型API集成
- 核心业务逻辑实现

### ✅ **Phase 2: 数据持久化** (已完成)
- SQLite本地数据库集成
- Repository模式数据访问层
- 完整的测试覆盖

### 🚀 **Phase 3: 生产就绪** (进行中)
- 云数据库迁移
- 前端用户界面
- 生产环境部署

### 🎯 **Phase 4: 产品化** (计划中)
- 用户体验优化
- 高级功能开发
- 商业化准备

---

## 🔧 **技术架构**

### **后端技术栈**
- **框架**: FastAPI + Python 3.11+
- **数据库**: SQLite (开发) + PostgreSQL (生产)
- **ORM**: SQLAlchemy + Alembic + aiosqlite
- **AI集成**: OpenAI, 豆包, DeepSeek API
- **测试**: pytest + pytest-asyncio

### **前端技术栈** (已确定)
- **框架**: Streamlit (Python)
- **图表**: Plotly + Altair + Streamlit原生图表
- **认证**: 集成FastAPI JWT认证
- **状态管理**: Streamlit Session State
- **部署**: Streamlit Cloud

### **部署架构** (更新)
- **后端**: Railway / Render (FastAPI)
- **数据库**: SQLite (开发) → Supabase PostgreSQL (生产)
- **前端**: Streamlit Cloud
- **监控**: Streamlit内置监控 + 自定义日志

---

## 📝 **开发原则**

### **敏捷开发**
- 快速迭代，持续交付
- 测试驱动开发 (TDD)
- 代码审查和质量保证
- 文档与代码同步更新

### **技术决策**
- 本地优先，渐进云化
- 简单可靠，避免过度工程
- 开源优先，商业友好
- 性能与可维护性并重

---

---

## 📋 **关键决策记录**

### **前端技术选型决策 (2024-12-19)**
- **决策**: 选择Streamlit替代React作为MVP前端
- **理由**:
  - 开发效率: 1-2周 vs 4-6周
  - 技术一致性: Python统一技术栈
  - 功能适配: 完美适合数据可视化需求
  - MVP目标: 快速验证产品价值
- **风险**: 用户体验限制，扩展性约束
- **应对**: 预留React迁移方案，重点优化核心流程

### **架构演进路径**
```
Phase 1: 后端优先 ✅ (已完成)
    ↓
Phase 2: Streamlit MVP 🚀 (进行中)
    ↓
Phase 3: 云化部署 📋 (计划中)
    ↓
Phase 4: React迁移 🔮 (可选，基于用户反馈)
```

---

*最后更新: 2024-12-19*
*项目状态: 后端MVP完成，Streamlit前端开发中*
*当前Sprint: Sprint 6 - Streamlit MVP前端开发*
*下一里程碑: 3周内完成可用的MVP产品*
